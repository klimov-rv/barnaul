"use strict";document.addEventListener("DOMContentLoaded",(function(){$((function(){$(".x3-tmenu__icon").click((function(){$(".x3-tmenu__wrap").addClass("x3-tmenu__wrap--open")})),$(".x3-tmenu__close").click((function(){$(".x3-tmenu__wrap").removeClass("x3-tmenu__wrap--open")})),$(document).on("click",".x3-tmenu__wrap--open > ul > li > a",(function(){if(0!=$(this).not(".root-item").length)return $(this).toggleClass("open"),$(this).next("ul").slideToggle(),!1}))})),$((function(){$(".x3-search__icon").click((function(){$(".x3-search-panel").addClass("x3-search-panel--show"),$(".x3-search-panel input[type='text']").focus()})),$(".x3-search-panel__close").click((function(){$(".x3-search-panel").removeClass("x3-search-panel--show")})),$(document).keyup((function(e){"Escape"===e.key&&$(".x3-search-panel").hasClass("x3-search-panel--show")&&$(".x3-search-panel").removeClass("x3-search-panel--show")}))})),document.querySelector(".site-wrap").classList.add("dom-loaded"),jcf.replaceAll();var e=document.querySelectorAll(".filter-toggle");window.addEventListener("click",(function(t){t.target.closest(".filter-popup")||e.forEach((function(e,n){e.contains(t.target)||e.classList.remove("is-button-active")}))})),e.forEach((function(e,t){e.addEventListener("click",(function(e){e.preventDefault(),e.target.closest(".filter-toggle").classList.toggle("is-button-active")}))})),document.querySelectorAll(".filter-checbox-item").forEach((function(e,t){e.addEventListener("click",(function(e){var t=e.target.closest(".filter-popup"),n=t.querySelectorAll('input[type="checkbox"]:checked').length,i=t.closest(".filter-title"),o=i.querySelector(".filter-count-selected");n>0?(o.innerHTML=n,i.classList.add("is-active")):(o.innerHTML="",i.classList.remove("is-active"))}))})),document.querySelectorAll(".filter-apply").forEach((function(e,t){e.addEventListener("click",(function(e){e.target.closest(".filter-title").querySelector(".filter-toggle").classList.toggle("is-button-active")}))})),$((function(){var e=$(".event-list"),t=$(".iso-filter").on("click",".iso-filter__btn",(function(){var e=$(this).attr("data-filter");location.hash="filter="+encodeURIComponent(e)})),n=!0;function i(){var i=function(){location.hash;var e=location.hash.match(/filter=([^&]+)/i),t=e&&e[1];return t&&decodeURIComponent(t)}();if("*"===i)return e.isotope({itemSelector:".event-list__item",filter:i}),t.find(".is-checked").removeClass("is-checked"),t.find('[data-filter="*"]').addClass("is-checked"),void history.pushState("",document.title,window.location.pathname+window.location.search);!i&&n||(n=!0,e.isotope({itemSelector:".event-list__item",filter:"."+i}),i&&(t.find(".is-checked").removeClass("is-checked"),t.find('[data-filter="'+i+'"]').addClass("is-checked")))}$(window).on("hashchange",i),i()})),moment.locale("ru");var t=moment().format("YYYY-MM"),n=[{title:"Multi-Day Event",endDate:t+"-14",startDate:t+"-10"},{endDate:t+"-23",startDate:t+"-21",title:"Another Multi-Day Event"},{date:t+"-21",title:"Single Day Event"},{date:t+"-07",title:"Single Day Event"},{date:t+"-11",title:"Single Day Event"}];$("#calendar").length>0&&$("#calendar").clndr({events:n,clickEvents:{click:function(e){console.log("Calendar clicked: ",e)},today:function(){console.log("Calendar today")},nextMonth:function(){console.log("Calendar next month")},previousMonth:function(){console.log("Calendar previous month")},onMonthChange:function(){console.log("Calendar month changed")},nextYear:function(){console.log("Calendar next year")},previousYear:function(){console.log("Calendar previous year")},onYearChange:function(){console.log("Calendar year changed")},nextInterval:function(){console.log("Calendar next interval")},previousInterval:function(){console.log("Calendar previous interval")},onIntervalChange:function(){console.log("Calendar interval changed")}},template:$("#template-calendar").html()}),$(".popup-with-zoom-anim").magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in"});var i=new Vivus("js-historical_line__animate",{type:"scenario",start:"manual",delay:0,duration:150,animTimingFunction:Vivus.EASE,onReady:function(e){}},(function(e){}));function o(e,t,n,i,o,a){console.log("calIamgeSize");var l=n/100,c=i/100,r=e/100,s=t/100;if(e>=n)console.log("предполагается искажение координат");else{var d=o/l*r,u=a/c*s;$(".historical_line_svg").attr({width:d,height:u})}}gsap.to("#js-historical_line__animate",{scrollTrigger:{trigger:".historical_line_svg",start:"10% bottom",onToggle:function(e){e.trigger.parentNode.classList.add("animation-started"),i.play();var t=document.querySelectorAll(".historical_line_point"),n=document.querySelector(".svg_animate"),o=n.getBoundingClientRect().top,a=n.getBoundingClientRect().left;t.forEach((function(e){return n.appendChild(function(e,t,n){var i=document.createElement("div");i.setAttribute("place_name",n.getAttribute("place_name"));var o=n.getBoundingClientRect();return i.style.width=o.width+10+"px",i.style.height=o.height+10+"px",i.style.left=o.left-t-5+"px",i.style.top=o.top-e-5+"px",i.classList.add("duplicate_point"),i}(o,a,e))})),tippy(".duplicate_point",{animation:"scale-subtle",placement:"right",interactive:!0,allowHTML:!0,content:function(e){return'<a href="#"><span class="ttip-text">'+e.getAttribute("place_name")+'</span><svg aria-hidden="true" width="16" height="12"> <use xlink:href="#arrow-right2"></use> </svg></a>'}})}}}),$(".historical_line_map").on("load",(function(){var e=$(".historical_line_map").width(),t=$(".historical_line_map").height();o(e,t,1920,762,1026,755),$(window).on("resize",(function(){o(e,t,1920,762,1026,755)}))}))}));